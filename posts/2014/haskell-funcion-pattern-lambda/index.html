<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    
    <meta name="description" content="石头的博客.">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:domain" content="http://oopschen.github.io">
    
    <meta name="twitter:image" content="http://oopschen.github.io/tn.png">
    <meta name="twitter:title" property="og:title" itemprop="title name" content="Oopschen的日志">
    <meta name="twitter:description" property="og:description" itemprop="description" content="石头的博客.">
    <meta name="og:type" content="website">
    <meta name="og:url" content="http://oopschen.github.io">
    <meta name="og:image" itemprop="image primaryImageOfPage" content="http://oopschen.github.io/tn.png">
    
    <title>Haskell学习笔记一--More on function</title>
    <link rel="shortcut icon" href="http://oopschen.github.io/sam.ico" id="favicon">
    <link rel="stylesheet" href="http://oopschen.github.io/css/style.css">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">
    
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-49453400-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-49453400-1');
    </script>
    

</head>

</html>
<body><div class="wrap"><div class="section" id="title">Haskell学习笔记一--More on function</div><div class="section" id="content">Fri Jan 24, 2014 &#183; 180 words

<div><span id="tag"><a href="http://oopschen.github.io/tags/haskell">Haskell</a></span><span id="tag"><a href="http://oopschen.github.io/tags/tutorial">tutorial</a></span><span id="tag"><a href="http://oopschen.github.io/tags/function">function</a></span></div><hr/>

<p>在haskell中我们可以对function做的更多, 这节一起来看看什么是function pattern和lambda function, 以及什么是多态类.</p>

<h1 id="function-pattern">Function Pattern</h1>

<p>首先我们来看下我们在python的一段代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    <span style="color:#a6e22e">def</span> <span style="color:#a6e22e">sumList</span>(<span style="color:#a6e22e">l</span>) <span style="color:#66d9ef">:</span>  
        <span style="color:#66d9ef">if</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">len</span>(<span style="color:#a6e22e">l</span>) <span style="color:#66d9ef">:</span>  
          <span style="color:#a6e22e">return</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">if</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">len</span>(<span style="color:#a6e22e">l</span>) <span style="color:#66d9ef">:</span>  
          <span style="color:#a6e22e">return</span> <span style="color:#a6e22e">l</span>[<span style="color:#ae81ff">0</span>] 
        <span style="color:#a6e22e">return</span> <span style="color:#a6e22e">l</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> <span style="color:#a6e22e">l</span>[<span style="color:#ae81ff">1</span>] </code></pre></div>
<p>那么用function pattern写会如何呢?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    <span style="color:#a6e22e">sumList</span> <span style="color:#f92672">::</span> <span style="color:#66d9ef">Num</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=&gt;</span> [<span style="color:#a6e22e">a</span>] <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">a</span>  
    <span style="color:#a6e22e">sumList</span> (<span style="color:#a6e22e">ele</span><span style="color:#66d9ef">:</span><span style="color:#a6e22e">oEle</span>) <span style="color:#f92672">=</span> <span style="color:#a6e22e">ele</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sumList</span> <span style="color:#a6e22e">oEle</span>  
    <span style="color:#a6e22e">sumList</span> [<span style="color:#a6e22e">x</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">x</span>
    <span style="color:#a6e22e">sumList</span> <span style="color:#66d9ef">[]</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span></code></pre></div>
<p>这段函数该如何解读?看起来我们像是对*sumList*定义了3遍,但是每次定义的样子都不一样,这样会不会让函数的定义混乱?这时候<strong>Funtion Pattern</strong>就开始发挥作用了.</p>

<p>先来看第一段代码:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    <span style="color:#a6e22e">sumList</span> (<span style="color:#a6e22e">ele</span><span style="color:#66d9ef">:</span><span style="color:#a6e22e">oEle</span>) <span style="color:#f92672">=</span> <span style="color:#a6e22e">ele</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">sumList</span> <span style="color:#a6e22e">oEle</span>  </code></pre></div>
<p>这段代码定义了当sumList的参数多余一个元素的时候将第一个元素的值和后续元素递归调用后的值相加.</p>

<p>再来看第二段代码:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    <span style="color:#a6e22e">sumList</span> [<span style="color:#a6e22e">x</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">x</span></code></pre></div>
<p>当sumList的参数有且只有一个元素的时候返回该元素的值.</p>

<p>最后是第三段代码:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    <span style="color:#a6e22e">sumList</span> <span style="color:#66d9ef">[]</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span></code></pre></div>
<p>这段代码是最容易理解的,当为空数组的时候返回0.</p>

<p>好了,这就是Funcion Pattern的功用了, 他没有定义了3次函数, 而是根据不同参数定义不同的函数, 实现了上述python的功能.</p>

<h1 id="lambda">Lambda</h1>

<p>接下来我们来看看lambda, 可以理解为没有函数名字的函数, 一般用在这个函数极其简单, 且只会被使用一次.还是先来看看python是如何写lambda的:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    (<span style="color:#a6e22e">lambda</span> <span style="color:#a6e22e">x</span><span style="color:#66d9ef">:</span> <span style="color:#a6e22e">x</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)(<span style="color:#ae81ff">1</span>)</code></pre></div>
<p>再来看看haskell是如何写的:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    (<span style="color:#a6e22e">\</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">-&gt;</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#ae81ff">1</span></code></pre></div>
<p>其中**\**表示lambda函数的开头, 其他就和一般函数定义是一样的.</p>

<h1 id="多态类-polymorphic-types-和类构造器-type-constructors">多态类(Polymorphic Types)和类构造器(Type Constructors)</h1>

<p>来看下这么一段超级奇怪的代码:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    <span style="color:#a6e22e">main</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">return</span> ()</code></pre></div>
<p>main同样是所有Haskell程序的入口, 这段代码是最简单的Haskell程序.他的功能只是把main这个变量赋值成一个类型,而这个类型是null, 也就是我们看到的<strong>()</strong>. 可以把他理解成python中的None.</p>

<p>再来看看关于main的一种定义:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    <span style="color:#a6e22e">main</span> <span style="color:#f92672">::</span> <span style="color:#66d9ef">IO</span> ()</code></pre></div>
<p>咋看起来,这怎么像python中的函数调用?等等,Haskell 的函数调用也不是这样的,而且在定义中也没办法出现函数调用呀?这货到底是什么?首先,IO就是我们说的多态类, 他接受一个类型的参数, 也就是(). 而这段定义是说main是被IO构造出来的类型, 而IO接受一个()的参数.</p>

<h1 id="maybe">Maybe</h1>

<p>我们再来看一个标准库中Maybe的模块.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    <span style="color:#66d9ef">data</span> <span style="color:#66d9ef">Maybe</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">Nothing</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">Just</span> <span style="color:#a6e22e">a</span></code></pre></div>
<p>*data*是用来定义类型的关键字, 这段代码是把a这个类型定义为Nothing或者Just a.</p>

<p>再来看下一个例子</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Haskell" data-lang="Haskell">    <span style="color:#a6e22e">showPet</span> <span style="color:#f92672">::</span> <span style="color:#66d9ef">Maybe</span> (<span style="color:#66d9ef">String</span>, <span style="color:#66d9ef">Int</span>, <span style="color:#66d9ef">String</span>) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">String</span>
    <span style="color:#a6e22e">showPet</span> <span style="color:#66d9ef">Nothing</span>		<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;none&#34;</span>
    <span style="color:#a6e22e">showPet</span> (<span style="color:#66d9ef">Just</span> (<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">age</span>, <span style="color:#a6e22e">species</span>))	<span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;a &#34;</span> <span style="color:#f92672">++</span> <span style="color:#a6e22e">species</span> <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34; named &#34;</span> <span style="color:#f92672">++</span> <span style="color:#a6e22e">name</span> <span style="color:#f92672">++</span> <span style="color:#e6db74">&#34;, aged &#34;</span> <span style="color:#f92672">++</span> (<span style="color:#a6e22e">show</span> <span style="color:#a6e22e">age</span>)</code></pre></div>
<p>这个例子我们可以看到showPet接收一个Maybe类型的参数, 当参数为Nothing的时候返回none的字符串.而当参数的类型是Just (name, age, species)类型的时候, 他就是一个(name, age, species)类型.真是要彻底颠覆对类型(也就是type)的理解了.对这里笔者还是不十分理解,有待深入研究Maybe到底干了什么事情.</p>
</div><div class="section bottom-menu"><hr/><p>
<a href="/posts">back</a>
 &#183;



<a href="/posts">博客日志</a>


&#183; <a href="/about">我是谁?</a>

&#183; <a href="http://oopschen.github.io">home</a></p></div><div class="section footer">石头, OOPS!!!</div></div></body>